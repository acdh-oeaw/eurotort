{% extends "base.html" %}
{% load static %}
{% load webpage_extras %}
{% block title %}{{ object }}{% endblock %}
{% block content %}
<nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb" class="p-2">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">Home</a></li>
        <li class="breadcrumb-item"><a href="{{ object.get_listview_url }}">{{ verbose_name_plural }}</a></li>
        {% if object.part_of %}
        <li class="breadcrumb-item"><a href="{{ object.part_of.get_absolute_url }}">{{ object.part_of.title }}</a></li>
        {% endif %}
        <li class="breadcrumb-item active" aria-current="page">{{ object.title }}</li>
    </ol>
</nav>
{% if object.part_of %}
<div class="row p-3">
    <div class="col-md-2">
        {% if user.is_authenticated %}
        {% if object.get_prev %}
        <p class="text-start">
            <a href="{{ object.get_prev }}">
                <i class="bi bi-chevron-left" title="previous entry"></i>
            </a>
        </p>
        {% endif %}
        {% endif %}
    </div>
    <div class="col-md-8">
        <h1 class="text-center">
            {{ object }}, in: <a href="{{ object.part_of.get_absolute_url }}">{{ object.part_of }}</a>
            {% if user.is_authenticated %}
            <small>
                <a href="{{ object.get_edit_url }}">
                    <i class="bi bi-pencil-square" title="edit entry"></i>
                </a>
            </small>
            {% endif %}

        </h1>
    </div>
    <div class="col-md-2">
        {% if user.is_authenticated %}
        {% if object.get_prev %}
        <p class="text-end">
            
            <a href="{{ object.get_next }}">
                <i class="bi bi-chevron-right" title="next entry"></i>
            </a>
        </p>
        {% endif %}
        {% endif %}
    </div>
</div>
{% else %}
{% include 'archiv/partials/detailview_title.html' %}
{% endif %}

<div class="container">
    {% if object.part_of %}
    <h2 class="pb-2 pt-2 fs-4">published in</h2>
    <p class="ps-5">
        <a href="{{ object.part_of.get_absolute_url }}">{{ object.part_of }}</a>
    </p>
    {% endif %}

    {% if object.doi %}
    <h2 class="pb-2 pt-2 fs-4">DOI</h2>
    <p class="ps-5"><a href="{{ object.doi }}">{{ object.doi }}</a></p>
        
    {% endif %}
    {% if object.has_bibliographic_items.all %}
    <h2 class="pb-2 pt-2 fs-4">Chapters</h2>
    <dl class="multi-column-dl">
        <dt class="visually-hidden">Chapters</dt>
        {% for x in object.has_bibliographic_items.all %}
        <dd><a href="{{ x.get_absolute_url }}">{{ x }}</a></dd>
        {% endfor %}
    </dl>
    {% endif %}
    {% with courtdecissions=cases %}
    <h2 class="p-3 text-center">
        {% if object.part_of %}
        <a href="{% url 'archiv:courtdecission_browse' %}?year_book_chapter={{ object.id }}">{{ courtdecissions.count }} reported cases</a>
        {% else %}
        {{ courtdecissions.count }} reported cases
        {% endif %}
    </h2>
    {% include 'archiv/partials/court_dl.html' %}
    {% endwith %}
    {% if user.is_authenticated %}
    <div class="float-end">
        <a href="{{ object.get_delete_url }}">
            <i class="bi bi-trash3" title="delete entry"></i>
        </a>
    </div>
    {% endif %}
</div>

{% endblock %}
